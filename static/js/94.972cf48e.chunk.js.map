{"version":3,"file":"static/js/94.972cf48e.chunk.js","mappings":"2RACA,G,QAAA,CAAgB,UAAY,sC,oBCgG5B,MAtFA,WAA6B,IAADA,EACpBC,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,MACXC,GAAkBC,EAAAA,EAAAA,KAAY,SAACC,GAAK,OAAKA,EAAMC,KAAKH,eAAe,IACnEI,GAAQH,EAAAA,EAAAA,KAAY,SAACC,GAAK,OAAKA,EAAMC,KAAKC,KAAK,IACrDC,GAAgCC,EAAAA,EAAAA,UAAS,CACvCC,KAAM,GACNC,MAAO,GACPC,SAAU,KACVC,GAAAC,EAAAA,EAAAA,GAAAN,EAAA,GAJKO,EAAQF,EAAA,GAAEG,EAAWH,EAAA,GAMtBI,EAAe,SAAAC,GACnB,IAAAC,EAAwBD,EAAEE,OAAlBV,EAAIS,EAAJT,KAAMW,EAAKF,EAALE,MACdL,GAAY,SAAAM,GAAQ,OAAAC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAUD,GAAQ,IAAAE,EAAAA,EAAAA,GAAA,GAAGd,EAAOW,GAAK,GACvD,EAmCA,OAjCAI,EAAAA,EAAAA,YAAU,WAEJtB,IAAoBI,GACtBN,EAAS,aAEb,GAAE,CAACE,EAAiBI,EAAON,KA6BzByB,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,EAAOC,UAAUC,SAAA,EAC/BC,EAAAA,EAAAA,KAAA,MAAIJ,UAAWC,EAAOI,QAAQF,SAAC,kBAC/BJ,EAAAA,EAAAA,MAAA,QAAMO,SA7BQ,SAAAC,GAAA,OAAApC,EAAAA,IAAAqC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAAC,EAAMpB,GAAC,IAAAqB,EAAA,OAAAH,EAAAA,EAAAA,KAAAI,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAEP,OAAnBzB,EAAE0B,iBAAiBH,EAAAC,KAAA,EAAAD,EAAAE,KAAA,GAGME,EAAAA,EAAAA,IAAoB,CAACnC,KAAMK,EAASL,KAAMC,MAAOI,EAASJ,MAAOC,SAAUG,EAASH,WAAW,KAAD,EAA/G2B,EAAQE,EAAAK,KACd/C,GAASgD,EAAAA,EAAAA,IAAS,CAACC,MAAOT,EAASS,MAAOC,KAAMV,EAASU,QAIzDhD,EAAS,cACTiD,YAAW,WACTC,EAAAA,GAAMC,QAAQ,+BAChB,GAAG,KAAKX,EAAAE,KAAA,oBAAAF,EAAAC,KAAA,GAAAD,EAAAY,GAAAZ,EAAA,SAGqB,MAA1BA,EAAAY,GAAMd,SAASe,QAA+C,eAA7Bb,EAAAY,GAAMd,SAASgB,KAAK7C,KAAqB,CAAA+B,EAAAE,KAAA,SAC1C,OAAjCQ,EAAAA,GAAM5C,MAAM,sBAAqBkC,EAAAe,OAAA,kBAIjCL,EAAAA,GAAM5C,MAAM,sBAAqBkC,EAAAY,IAAS,yBAAAZ,EAAAgB,OAAA,GAAAnB,EAAA,oBAG/CoB,MAAA,KAAAC,UAAA,EAKgC7B,SAAA,EAC3BC,EAAAA,EAAAA,KAAA,SACE6B,KAAK,OACLlD,KAAK,OACLmD,YAAY,OACZxC,MAAON,EAASL,KAChBoD,SAAU7C,EACV8C,UAAQ,EACRC,aAAa,sBAEfjC,EAAAA,EAAAA,KAAA,SACE6B,KAAK,QACLlD,KAAK,QACLmD,YAAY,QACZxC,MAAON,EAASJ,MAChBmD,SAAU7C,EACV8C,UAAQ,EACRC,aAAa,sBAEfjC,EAAAA,EAAAA,KAAA,SACE6B,KAAK,WACLlD,KAAK,WACLmD,YAAY,WACZxC,MAAON,EAASH,SAChBkD,SAAU7C,EACV8C,UAAQ,EACRC,aAAa,sBAEfjC,EAAAA,EAAAA,KAAA,UAAQ6B,KAAK,SAAQ9B,SAAC,kBAI9B,C","sources":["webpack://react-homework-template/./src/components/PagesLog/RegistrationPage/RegistrationPage.module/RegistrationPage.module.css?75ed","components/PagesLog/RegistrationPage/RegistrationPage.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"RegistrationPage_container__ycFvY\"};","import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { toast } from 'react-toastify';\nimport {sendRegisterRequest } from 'api/api';\nimport 'react-toastify/dist/ReactToastify.css';\n\n\nimport styles from './RegistrationPage.module/RegistrationPage.module.css';\nimport { register } from 'redux/auth/authSlice';\n\nfunction RegistrationPage() {\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const isAuthenticated = useSelector((state) => state.auth.isAuthenticated);\n  const error = useSelector((state) => state.auth.error);\n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    password: '',\n  });\n\n  const handleChange = e => {\n    const { name, value } = e.target;\n    setFormData(prevData => ({ ...prevData, [name]: value }));\n  };\n\n  useEffect(() =>  {\n    // debugger\n    if (isAuthenticated && !error) {\n      navigate('/user-menu');\n    }\n  },[isAuthenticated, error, navigate]);\n  \n  const handleSubmit = async e => {\n    debugger\n    e.preventDefault();\n\n    try {\n      const response = await sendRegisterRequest({name: formData.name, email: formData.email, password: formData.password}); \n      dispatch(register({token: response.token, user: response.user}));\n    \n\n     \n      navigate('/user-menu');\n      setTimeout(() => {\n        toast.success('User successfully registered');\n      }, 500);\n\n    } catch (error) {\n      if(error.response.status === 400 && error.response.data.name === \"MongoError\") {\n        toast.error('User already exist')\n        return;\n      }\n      else {\n        toast.error('Registration failed', error);\n    }\n    }\n  };\n\n  return (\n    <div className={styles.container}> \n      <h2 className={styles.heading}>Registration</h2>\n      <form onSubmit={handleSubmit}>\n        <input\n          type=\"text\"\n          name=\"name\"\n          placeholder=\"Name\"\n          value={formData.name}\n          onChange={handleChange}\n          required\n          autoComplete=\"current-password\"\n        />\n        <input\n          type=\"email\"\n          name=\"email\"\n          placeholder=\"Email\"\n          value={formData.email}\n          onChange={handleChange}\n          required\n          autoComplete=\"current-password\"\n        />\n        <input\n          type=\"password\"\n          name=\"password\"\n          placeholder=\"Password\"\n          value={formData.password}\n          onChange={handleChange}\n          required\n          autoComplete=\"current-password\"\n        />\n        <button type=\"submit\">Register</button>\n      </form>\n    </div>\n  );\n}\n\nexport default RegistrationPage;\n"],"names":["_ref","dispatch","useDispatch","navigate","useNavigate","isAuthenticated","useSelector","state","auth","error","_useState","useState","name","email","password","_useState2","_slicedToArray","formData","setFormData","handleChange","e","_e$target","target","value","prevData","_objectSpread","_defineProperty","useEffect","_jsxs","className","styles","container","children","_jsx","heading","onSubmit","_x","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_context","prev","next","preventDefault","sendRegisterRequest","sent","register","token","user","setTimeout","toast","success","t0","status","data","abrupt","stop","apply","arguments","type","placeholder","onChange","required","autoComplete"],"sourceRoot":""}